<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Spin the Wheel</title>

<style>
  * { box-sizing: border-box; }

  body {
    margin: 0;
    height: 100vh;
    background: #000;
    color: #fff;
    font-family: Arial, sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    overflow: hidden;
  }

  h1 { margin: 10px 0; }

  .wheel-container {
    position: relative;
    width: 320px;
    height: 320px;
  }

  .wheel {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    border: 8px solid #fff;
    transition: transform 4.5s cubic-bezier(0.17, 0.67, 0.12, 0.99);
  }

  .pointer {
    position: absolute;
    top: -18px;
    left: 50%;
    transform: translateX(-50%);
    width: 0;
    height: 0;
    border-left: 14px solid transparent;
    border-right: 14px solid transparent;
    border-bottom: 24px solid red;
  }

  button {
    margin: 15px 0;
    padding: 14px 40px;
    font-size: 20px;
    font-weight: bold;
    border: none;
    border-radius: 10px;
    background: #ff004f;
    color: #fff;
    cursor: pointer;
  }

  .result {
    font-size: 24px;
    min-height: 30px;
    text-align: center;
  }

  /* Death effect */
  .death {
    animation: shake 0.5s infinite;
    background: darkred;
  }

  @keyframes shake {
    0% { transform: translate(0); }
    25% { transform: translate(-5px, 5px); }
    50% { transform: translate(5px, -5px); }
    75% { transform: translate(-5px, -5px); }
    100% { transform: translate(0); }
  }

  /* Money rain */
  .money {
    position: absolute;
    top: -50px;
    font-size: 24px;
    animation: fall linear forwards;
  }

  @keyframes fall {
    to { transform: translateY(110vh); }
  }

  /* History */
  .history {
    width: 90%;
    max-width: 350px;
    max-height: 120px;
    overflow-y: auto;
    font-size: 14px;
    border-top: 1px solid #444;
    margin-top: 10px;
    padding-top: 5px;
  }

  /* Slider */
  .slider {
    width: 280px;
    margin: 10px 0;
    text-align: center;
    font-size: 14px;
  }
</style>
</head>

<body>

<h1>Spin the Wheel</h1>

<div class="slider">
  Death Probability: <span id="deathValue">5</span>%
  <input type="range" min="1" max="30" value="5" id="deathSlider">
</div>

<div class="wheel-container">
  <div class="pointer"></div>

  <svg class="wheel" viewBox="0 0 100 100">
    <circle cx="50" cy="50" r="50" fill="#222" />
  </svg>
</div>

<button onclick="spin()">SPIN</button>
<div class="result" id="result"></div>

<div class="history" id="history"></div>

<audio id="spinSound" src="https://assets.mixkit.co/sfx/preview/mixkit-fast-small-sweep-transition-166.wav"></audio>
<audio id="winSound" src="https://assets.mixkit.co/sfx/preview/mixkit-achievement-bell-600.wav"></audio>
<audio id="deathSound" src="https://assets.mixkit.co/sfx/preview/mixkit-creepy-ambience-1910.wav"></audio>

<script>
  const baseOutcomes = [
    "500k â‚¬", "1 Mio â‚¬", "10 Mio â‚¬",
    "100 Mio â‚¬", "1 Bil â‚¬", "10 Bil â‚¬"
  ];

  const historyEl = document.getElementById("history");
  const resultEl = document.getElementById("result");
  const slider = document.getElementById("deathSlider");
  const deathValue = document.getElementById("deathValue");

  slider.oninput = () => deathValue.textContent = slider.value;

  function vibrate(p) { navigator.vibrate && navigator.vibrate(p); }

  function moneyRain() {
    for (let i = 0; i < 20; i++) {
      const m = document.createElement("div");
      m.className = "money";
      m.textContent = "ðŸ’°";
      m.style.left = Math.random() * 100 + "vw";
      m.style.animationDuration = (Math.random() * 2 + 2) + "s";
      document.body.appendChild(m);
      setTimeout(() => m.remove(), 4000);
    }
  }

  function spin() {
    const spinSound = document.getElementById("spinSound");
    const winSound = document.getElementById("winSound");
    const deathSound = document.getElementById("deathSound");

    document.body.classList.remove("death");

    spinSound.currentTime = 0;
    spinSound.play();
    vibrate([100, 50, 100]);

    setTimeout(() => {
      const deathChance = parseInt(slider.value);
      const roll = Math.random() * 100;

      let outcome;
      if (roll < deathChance) {
        outcome = "ðŸ’€ Death";
        deathSound.play();
        document.body.classList.add("death");
        vibrate([300, 100, 300]);
      } else {
        outcome = baseOutcomes[Math.floor(Math.random() * baseOutcomes.length)];
        winSound.play();
        vibrate([150]);
        if (outcome.includes("Bil") || outcome.includes("100")) moneyRain();
      }

      resultEl.textContent = "Result: " + outcome;
      historyEl.innerHTML = `â€¢ ${outcome}<br>` + historyEl.innerHTML;
    }, 4500);
  }
</script>

</body>
</html>
