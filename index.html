<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Spin the Wheel</title>

<style>
  * { box-sizing: border-box; }

  body {
    margin: 0;
    height: 100vh;
    background: #000;
    color: #fff;
    font-family: Arial, sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    overflow: hidden;
  }

  h1 { margin: 10px 0; }

  .wheel-container {
    position: relative;
    width: 320px;
    height: 320px;
  }

  .wheel {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    border: 8px solid #fff;
    background: conic-gradient(
      #b0ffb0 0deg 60deg,
      #b084ff 60deg 120deg,
      gold 120deg 180deg,
      #ff4d4d 180deg 240deg,
      #b0ffb0 240deg 300deg,
      #b084ff 300deg 360deg
    );
    position: relative;
    overflow: hidden;
    transition: transform 5.8s cubic-bezier(.12,.82,.08,1);
  }

  /* Labels on wheel */
  .wheel .labels {
    position: absolute;
    inset: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    pointer-events: none;
  }
  .wheel .labels div {
    position: absolute;
    width: 120px;
    text-align: center;
    font-weight: bold;
    font-size: 14px;
    color: #000;
    transform-origin: 50% 160px; /* push labels outward */
  }
  .wheel .labels div:nth-child(1) { transform: rotate(0deg); }
  .wheel .labels div:nth-child(2) { transform: rotate(60deg); }
  .wheel .labels div:nth-child(3) { transform: rotate(120deg); }
  .wheel .labels div:nth-child(4) { transform: rotate(180deg); }
  .wheel .labels div:nth-child(5) { transform: rotate(240deg); }
  .wheel .labels div:nth-child(6) { transform: rotate(300deg); }

  .pointer {
    position: absolute;
    top: -18px;
    left: 50%;
    transform: translateX(-50%);
    width: 0;
    height: 0;
    border-left: 14px solid transparent;
    border-right: 14px solid transparent;
    border-bottom: 24px solid red;
    z-index: 2;
  }

  button {
    margin: 10px;
    padding: 14px 40px;
    font-size: 20px;
    font-weight: bold;
    border: none;
    border-radius: 10px;
    background: #ff004f;
    color: #fff;
    cursor: pointer;
  }

  .result {
    font-size: 22px;
    min-height: 30px;
    transition: all 0.3s ease;
  }

  .common { color:#b0ffb0; text-shadow:0 0 8px rgba(176,255,176,.6); }
  .rare { color:#b084ff; text-shadow:0 0 14px rgba(176,132,255,.9); }
  .legendary { color:gold; text-shadow:0 0 12px gold,0 0 30px orange; animation:pulse 1.2s infinite alternate; }
  .death-glow { color:#ff4d4d; text-shadow:0 0 15px red,0 0 35px darkred; animation:breathe 1.5s infinite; }

  @keyframes pulse { from { text-shadow:0 0 12px gold; } to { text-shadow:0 0 40px orange; } }
  @keyframes breathe { 0%,100%{opacity:.6} 50%{opacity:1} }

  .death { animation: shake .5s infinite; background: darkred; }
  @keyframes shake {
    0% { transform: translate(0); }
    25% { transform: translate(-5px, 5px); }
    50% { transform: translate(5px, -5px); }
    75% { transform: translate(-5px, -5px); }
    100% { transform: translate(0); }
  }

  .money {
    position: absolute;
    top: -50px;
    font-size: 24px;
    animation: fall linear forwards;
  }
  @keyframes fall { to { transform: translateY(110vh); } }

  .history,.leaderboard {
    width:90%;
    max-width:350px;
    max-height:120px;
    overflow-y:auto;
    font-size:14px;
    border-top:1px solid #444;
    margin-top:5px;
    padding-top:5px;
  }

  .slider { font-size:14px; margin-bottom:5px; }
</style>
</head>

<body>

<h1>Spin the Wheel</h1>

<div class="slider">
  Death Probability: <span id="deathValue">5</span>%
  <input type="range" min="1" max="30" value="5" id="deathSlider">
</div>

<div class="wheel-container">
  <div class="pointer"></div>
  <div class="wheel" id="wheel">
    <div class="labels">
      <div>500k â‚¬</div>
      <div>1 Mio â‚¬</div>
      <div>10 Mio â‚¬</div>
      <div>100 Mio â‚¬</div>
      <div>1 Bil â‚¬</div>
      <div>10 Bil â‚¬</div>
    </div>
  </div>
</div>

<button onclick="spin()">SPIN</button>

<div class="result" id="result"></div>
<div class="history" id="history"></div>
<div class="leaderboard" id="leaderboard"></div>

<audio id="spinSound" src="https://assets.mixkit.co/sfx/preview/mixkit-fast-small-sweep-transition-166.wav"></audio>
<audio id="tickSound" src="https://assets.mixkit.co/sfx/preview/mixkit-arcade-mechanical-bling-210.wav"></audio>
<audio id="winSound" src="https://assets.mixkit.co/sfx/preview/mixkit-achievement-bell-600.wav"></audio>
<audio id="deathSound" src="https://assets.mixkit.co/sfx/preview/mixkit-creepy-ambience-1910.wav"></audio>

<script>
  const outcomes=["500k â‚¬","1 Mio â‚¬","10 Mio â‚¬","100 Mio â‚¬","1 Bil â‚¬","10 Bil â‚¬"];
  const historyEl=document.getElementById("history");
  const leaderboardEl=document.getElementById("leaderboard");
  const resultEl=document.getElementById("result");
  const slider=document.getElementById("deathSlider");
  const deathValue=document.getElementById("deathValue");
  const wheel=document.getElementById("wheel");
  const tickSound=document.getElementById("tickSound");

  slider.oninput = ()=> deathValue.textContent = slider.value;
  let rotation = 0;

  function vibrate(p){navigator.vibrate && navigator.vibrate(p)}

  function classify(outcome){
    if(outcome.includes("Death")) return "death-glow";
    if(outcome.includes("Bil")) return "legendary";
    if(outcome.includes("100")) return "rare";
    return "common";
  }

  function moneyRain(){
    for(let i=0;i<20;i++){
      const m=document.createElement("div");
      m.className="money";
      m.textContent="ðŸ’°";
      m.style.left=Math.random()*100+"vw";
      m.style.animationDuration=(Math.random()*2+2)+"s";
      document.body.appendChild(m);
      setTimeout(()=>m.remove(),4000);
    }
  }

  function updateLeaderboard(outcome){
    const data=JSON.parse(localStorage.getItem("leaderboard")||"{}");
    data[outcome]=(data[outcome]||0)+1;
    localStorage.setItem("leaderboard",JSON.stringify(data));
    leaderboardEl.innerHTML="<b>Leaderboard</b><br>"+
      Object.entries(data).sort((a,b)=>b[1]-a[1])
      .map(([k,v])=>`${k}: ${v}`).join("<br>");
  }

  function spin(){
    resultEl.className="result";
    document.body.classList.remove("death");
    document.getElementById("spinSound").play();
    vibrate([100,50,100]);

    // Slow ticking sound
    let ticks=0;
    const tickInterval=setInterval(()=>{
      tickSound.currentTime=0;
      tickSound.play();
      ticks++;
      if(ticks>10) clearInterval(tickInterval);
    },220 + ticks*35);

    // Pick outcome first to spin realistically
    let outcome;
    if(Math.random()*100 < slider.value){
      outcome="ðŸ’€ Death";
    } else {
      outcome = outcomes[Math.floor(Math.random()*outcomes.length)];
    }

    // Determine wheel angle to land on selected outcome
    const index = outcomes.indexOf(outcome.replace("ðŸ’€ ","")) !== -1 ? outcomes.indexOf(outcome) : -1;
    const sliceDeg = 360 / outcomes.length;
    const randomOffset = Math.random() * sliceDeg * 0.8; // random offset in slice
    const targetRotation = index >= 0 ? (360 * 5 + 270 - index*sliceDeg - randomOffset) : (360*5 + Math.random()*360);
    rotation += targetRotation;

    wheel.style.transition="transform 5.8s cubic-bezier(.12,.82,.08,1)";
    wheel.style.transform=`rotate(${rotation}deg)`;

    setTimeout(()=>{
      if(outcome.includes("Death")){
        document.body.classList.add("death");
        document.getElementById("deathSound").play();
        vibrate([300,100,300]);
      } else {
        document.getElementById("winSound").play();
        vibrate([150]);
        if(outcome.includes("Bil")||outcome.includes("100")) moneyRain();
      }

      const rarity = classify(outcome);
      resultEl.textContent="Result: "+outcome;
      resultEl.classList.add(rarity);
      historyEl.innerHTML=`â€¢ ${outcome}<br>`+historyEl.innerHTML;
      updateLeaderboard(outcome);
    },5800);
  }

  updateLeaderboard("â€”");
</script>
</body>
</html>
